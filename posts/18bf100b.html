<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>SpringBoot基础篇 | 拾忆鱼's Blog</title><meta name="author" content="拾忆鱼"><meta name="copyright" content="拾忆鱼"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="referrer" content="no-referrer" /><meta name="description" content="1.SpringBoot简介  1.1原有Spring优缺点分析  1.1.1Spring优点 Spring是Java企业版（Java Enterprise Edition，JEE，也称J2EE）的轻量级代替品。无需开发重量级的Enterprise JavaBean（EJB），Spring为企业级Java开发提供了一种相对简单的方法，通过依赖注入和面向切面编程，用简单的Java对象（Plain">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot基础篇">
<meta property="og:url" content="https://www.haipeng-lin.cn/posts/18bf100b.html">
<meta property="og:site_name" content="拾忆鱼&#39;s Blog">
<meta property="og:description" content="1.SpringBoot简介  1.1原有Spring优缺点分析  1.1.1Spring优点 Spring是Java企业版（Java Enterprise Edition，JEE，也称J2EE）的轻量级代替品。无需开发重量级的Enterprise JavaBean（EJB），Spring为企业级Java开发提供了一种相对简单的方法，通过依赖注入和面向切面编程，用简单的Java对象（Plain">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/2b37069e05120f2696d7a1cb32152359.jpeg#pic_center">
<meta property="article:published_time" content="2024-08-28T04:37:24.000Z">
<meta property="article:modified_time" content="2024-09-01T01:40:37.249Z">
<meta property="article:author" content="拾忆鱼">
<meta property="article:tag" content="SpringBoot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i-blog.csdnimg.cn/blog_migrate/2b37069e05120f2696d7a1cb32152359.jpeg#pic_center"><link rel="shortcut icon" href="https://haipeng-lin.oss-cn-shenzhen.aliyuncs.com/202410101530409.png"><link rel="canonical" href="https://www.haipeng-lin.cn/posts/18bf100b"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="msvalidate.01" content="7A691DA1ABC779E7F680EF66E1D934AA"/><meta name="google-site-verification"/><meta name="baidu-site-verification" content="XXXXX"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":250},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 拾忆鱼","link":"链接: ","source":"来源: 拾忆鱼's Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'SpringBoot基础篇',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-01 09:40:37'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/gitcalendar/css/gitcalendar.css"/><link rel="stylesheet" href="/css/tag_plugins.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper-anzhiyu@1.0.4/lib/swiper.min.css"><script src="https://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script><link rel="stylesheet" href="/css/tags.css"><link rel="stylesheet" href="/css/double_article.css"><link rel="stylesheet" href="/css/nav.css"><link rel="stylesheet" href="/css/essay_page.css"><script type="text/javascript" src="/js/echarts.min.js"></script><script type="text/javascript" src="/js/copy.js"></script><script src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><link rel="stylesheet" href="/css/copyright.css"><link rel="stylesheet" href="/css/progress_bar.css"><link rel="stylesheet" href="/css/footer.css"><link rel="stylesheet" href="/css/page.css"><link rel="stylesheet" href="/css/layout.css"><link rel="stylesheet" href="/css/color.css"><link rel="stylesheet" href="/css/cursors/cursors.css"><link rel="stylesheet" href="/css/fonts/font.css"><link rel="stylesheet" href="/css/about/about.css"><link rel="stylesheet" href="/css/about/careers.css"><link rel="stylesheet" href="/css/about/genshinimpact.css"><link rel="stylesheet" href="/css/about/hello-about.css"><link rel="stylesheet" href="/css/about/site.css"><link rel="stylesheet" href="/css/about/skills.css"><link rel="stylesheet" href="/css/photo.css"><link rel="stylesheet" href="/css/icat.css"><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="拾忆鱼's Blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://haipeng-lin.oss-cn-shenzhen.aliyuncs.com/202410101530409.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">61</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives"><i class="fa-fw fas fa-archive"></i><span> 全部</span></a></li><li><a class="site-page child" href="/categories"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heart"></i><span> 空间</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/essay"><i class="fa-fw fas fa-comments"></i><span> 碎碎念</span></a></li><li><a class="site-page child" href="/collect"><i class="fa-fw fas fa-walking"></i><span> 足迹阁</span></a></li><li><a class="site-page child" href="/photo"><i class="fa-fw fas fa-images"></i><span> 照片墙</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about"><i class="fa-fw fas fa-address-card"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">拾忆鱼's Blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives"><i class="fa-fw fas fa-archive"></i><span> 全部</span></a></li><li><a class="site-page child" href="/categories"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heart"></i><span> 空间</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/essay"><i class="fa-fw fas fa-comments"></i><span> 碎碎念</span></a></li><li><a class="site-page child" href="/collect"><i class="fa-fw fas fa-walking"></i><span> 足迹阁</span></a></li><li><a class="site-page child" href="/photo"><i class="fa-fw fas fa-images"></i><span> 照片墙</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about"><i class="fa-fw fas fa-address-card"></i><span> 关于</span></a></div></div><center id="name-container"><a id="page-name" href="javascript:btf.scrollToDest(0, 500)">PAGE_NAME</a></center></div><div id="toggleButtons"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">SpringBoot基础篇</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-08-28T04:37:24.000Z" title="发表于 2024-08-28 12:37:24">2024-08-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-01T01:40:37.249Z" title="更新于 2024-09-01 09:40:37">2024-09-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E3%80%90%E6%A1%86%E6%9E%B6%E3%80%91/">【框架】</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="SpringBoot基础篇"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><h1 id="1springboot简介"><a class="markdownIt-Anchor" href="#1springboot简介"></a> 1.SpringBoot简介</h1>
<h2 id="11原有spring优缺点分析"><a class="markdownIt-Anchor" href="#11原有spring优缺点分析"></a> 1.1原有Spring优缺点分析</h2>
<h3 id="111spring优点"><a class="markdownIt-Anchor" href="#111spring优点"></a> 1.1.1Spring优点</h3>
<p>Spring是Java企业版（Java Enterprise Edition，JEE，也称J2EE）的轻量级代替品。无需开发重量级的Enterprise JavaBean（EJB），Spring为企业级Java开发提供了一种相对简单的方法，通过<mark>依赖注入和面向切面编</mark>程，用简单的Java对象（Plain Old Java Object，POJO）实现了EJB的功能。</p>
<h3 id="112spring缺点"><a class="markdownIt-Anchor" href="#112spring缺点"></a> 1.1.2Spring缺点</h3>
<p>虽然Spring的<mark>组件代码是轻量级</mark>的，但它的配<mark>置却是重量级的</mark>。一开始，Spring用XML配置，而且是很多XML配置。Spring 2.5引入了基于注解的组件扫描，这消除了大量针对应用程序自身组件的显式XML配置。Spring 3.0引入了基于Java的配置，这是一种类型安全的可重构配置方式，可以代替XML。</p>
<p>所有这些配置都代表了开发时的损耗。因为在思考Spring特性配置和解决业务问题之间需要进行思维切换，所以编写配置挤占了编写应用程序逻辑的时间。和所有框架一样，Spring实用，但与此同时它要求的回报也不少。</p>
<p>除此之外，项目的依赖管理也是一件耗时耗力的事情。<mark>在环境搭建时，需要分析要导入哪些库的坐标</mark>，而且还需要分析导入与之有依赖关系的其他库的坐标，一旦选错了依赖的版本，随之而来的不兼容问题就会严重阻碍项目的开发进度。</p>
<h2 id="12springboot概述"><a class="markdownIt-Anchor" href="#12springboot概述"></a> 1.2SpringBoot概述</h2>
<h3 id="121springboot解决上述spring的缺点"><a class="markdownIt-Anchor" href="#121springboot解决上述spring的缺点"></a> 1.2.1SpringBoot解决上述Spring的缺点</h3>
<p>SpringBoot对上述Spring的缺点进行的改善和优化，<mark>基于约定优于配置的思想</mark>，可以让开发人员<mark>不必在配置与逻辑业务之间进行思维的切换</mark>，全身心的投入到逻辑业务的代码编写中，从而大大提高了开发的效率，一定程度上缩短了项目周期。</p>
<h3 id="122springboot特点"><a class="markdownIt-Anchor" href="#122springboot特点"></a> 1.2.2SpringBoot特点</h3>
<ol>
<li>为<mark>基于Spring的开发</mark>提供更快的入门体验</li>
<li>开箱即用，<mark>没有代码生成</mark>，也<mark>无需XML配置</mark>。同时也可以修改默认值来满足特定的需求</li>
<li>提供了一些大型项目中常见的非功能性特性，如嵌入式服务器、安全、指标，健康检测、外部配置等</li>
<li>SpringBoot不是对Spring功能上的增强，而是提供了一种快速使用Spring的方式</li>
</ol>
<h3 id="123springboot核心功能"><a class="markdownIt-Anchor" href="#123springboot核心功能"></a> 1.2.3SpringBoot核心功能</h3>
<ol>
<li><mark><strong>起步依赖</strong></mark>：
<ul>
<li>起步依赖<mark>本质上是一个Maven项目对象模型（Project Object Model，POM）</mark>，定义了对其他库的传递依赖，这些东西加在一起即支持某项功能。</li>
<li>简单的说，起步依赖就是将具备某种功能的坐标打包到一起，并提供一些默认的功能。</li>
</ul>
</li>
<li><strong><mark>自动配置</mark></strong>：
<ul>
<li>Spring Boot的自动配置是一个<mark>运行时</mark>（更准确地说，是应用程序启动时）的过程，考虑了众多因素，才决定Spring配置应该用哪个，不该用哪个。该过程是Spring自动完成的。</li>
</ul>
</li>
</ol>
<h1 id="2springboot快速入门"><a class="markdownIt-Anchor" href="#2springboot快速入门"></a> 2.SpringBoot快速入门</h1>
<h2 id="21代码实现"><a class="markdownIt-Anchor" href="#21代码实现"></a> 2.1代码实现</h2>
<h3 id="211创建maven工程"><a class="markdownIt-Anchor" href="#211创建maven工程"></a> 2.1.1创建Maven工程</h3>
<ul>
<li>使用idea工具创建一个maven工程，该工程为普通的java工程</li>
</ul>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/d98ecf47143d1f9c75762bd3ba494877.png" alt="在这里插入图片描述" /></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/438ad97f288f97048e140e7abd71773f.png" alt="在这里插入图片描述" /></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/20832ec4afb3cfabd778489979e2adfc.png" alt="在这里插入图片描述" /></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/09cc031569c5555f49ed8857ad64424f.png" alt="在这里插入图片描述" /></p>
<h3 id="212添加springboot的起步依赖"><a class="markdownIt-Anchor" href="#212添加springboot的起步依赖"></a> 2.1.2添加SpringBoot的起步依赖</h3>
<ul>
<li>SpringBoot要求：项目要继承SpringBoot的起步依赖spring-boot-starter-parent</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>SpringBoot要集成SpringMVC进行Controller的开发，所以项目要导入web的启动依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="213编写springboot引导类"><a class="markdownIt-Anchor" href="#213编写springboot引导类"></a> 2.1.3编写SpringBoot引导类</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySpringBootApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MySpringBootApplication.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="214编写controller"><a class="markdownIt-Anchor" href="#214编写controller"></a> 2.1.4编写controller</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickStartController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/quick&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">quick</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;springboot 访问成功!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="215测试"><a class="markdownIt-Anchor" href="#215测试"></a> 2.1.5测试</h3>
<p>执行SpringBoot起步类的主方法，控制台打印日志如下：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/4685740c49a264c3ea7b623233689737.png" alt="image-20240312151455162" /></p>
<p>通过日志发现，Tomcat started on port(s): 8080 (http) with context path ‘’</p>
<p>tomcat已经起步，端口监听8080，web应用的虚拟工程名称为空</p>
<p>打开浏览器访问url地址为：<a target="_blank" rel="noopener" href="http://localhost:8080/quick">http://localhost:8080/quick</a></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/8d440f18b91d982160434abef0ee40a8.png" alt="image-20240312151536906" /></p>
<h2 id="22快速入门解析"><a class="markdownIt-Anchor" href="#22快速入门解析"></a> 2.2快速入门解析</h2>
<h3 id="221引导类解析"><a class="markdownIt-Anchor" href="#221引导类解析"></a> 2.2.1引导类解析</h3>
<ul>
<li>@SpringBootApplication：标注SpringBoot的启动类，该注解具备多种功能（后面详细剖析）</li>
<li>SpringApplication.run(MySpringBootApplication.class) 代表运行SpringBoot的启动类，参数为SpringBoot启动类的字节码对象</li>
</ul>
<h3 id="222工程热部署解析"><a class="markdownIt-Anchor" href="#222工程热部署解析"></a> 2.2.2工程热部署解析</h3>
<p>可以在修改代码后不重启就能生效，在 pom.xml 中添加如下配置就可以实现这样的功能，我们称之为热部署：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--热部署配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意：IDEA进行SpringBoot热部署失败原因</p>
<p>出现这种情况，并不是热部署配置问题，其根本原因是因为Intellij IEDA默认情况下不会自动编译，需要对IDEA进行自动编译的设置，如下：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/ecaddb53fd7ee385c6ffbaf1526dfd17.png" alt="在这里插入图片描述" /></p>
<ul>
<li>然后 Shift+Ctrl+Alt+/，选择Registry</li>
</ul>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/7fcd7f22658e737edb3f044af427b44a.png" alt="在这里插入图片描述" /></p>
<h2 id="23使用idea快速创建springboot项目自动导入依赖"><a class="markdownIt-Anchor" href="#23使用idea快速创建springboot项目自动导入依赖"></a> 2.3使用Idea快速创建SpringBoot项目（自动导入依赖）</h2>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/f767d9c1b7dc072551ede811f3c67030.png" alt="在这里插入图片描述" /></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/89d3af238179a767a27fff0946df50b4.png" alt="在这里插入图片描述" /></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/73dca65f7bdb7bcb7d6ca5ff009b4475.png" alt="在这里插入图片描述" /></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/10f87e36572ecdd9288ab3c3beab547d.png" alt="在这里插入图片描述" /></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/4d348108925523390679c745c29c74f4.png" alt="在这里插入图片描述" /></p>
<ul>
<li>通过idea快速创建的SpringBoot项目的pom.xml中已经导入了我们选择的web的起步依赖的坐标</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;project xmlns=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">	xsi:schemaLocation=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><span class="line">	&lt;modelVersion&gt;<span class="number">4.0</span><span class="number">.0</span>&lt;/modelVersion&gt;</span><br><span class="line"></span><br><span class="line">	&lt;groupId&gt;com.itheima&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;springboot_quick2&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;<span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">	&lt;packaging&gt;jar&lt;/packaging&gt;</span><br><span class="line"></span><br><span class="line">	&lt;name&gt;springboot_quick2&lt;/name&gt;</span><br><span class="line">	&lt;description&gt;Demo project <span class="keyword">for</span> Spring Boot&lt;/description&gt;</span><br><span class="line"></span><br><span class="line">	&lt;parent&gt;</span><br><span class="line">		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">		&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">		&lt;version&gt;<span class="number">2.0</span><span class="number">.1</span>.RELEASE&lt;/version&gt;</span><br><span class="line">		&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">	&lt;/parent&gt;</span><br><span class="line"></span><br><span class="line">	&lt;properties&gt;</span><br><span class="line">		&lt;project.build.sourceEncoding&gt;UTF-<span class="number">8</span>&lt;/project.build.sourceEncoding&gt;</span><br><span class="line">		&lt;project.reporting.outputEncoding&gt;UTF-<span class="number">8</span>&lt;/project.reporting.outputEncoding&gt;</span><br><span class="line">		&lt;java.version&gt;<span class="number">9</span>&lt;/java.version&gt;</span><br><span class="line">	&lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">	&lt;dependencies&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">			&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">	&lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">	&lt;build&gt;</span><br><span class="line">		&lt;plugins&gt;</span><br><span class="line">			&lt;plugin&gt;</span><br><span class="line">				&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">				&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">			&lt;/plugin&gt;</span><br><span class="line">		&lt;/plugins&gt;</span><br><span class="line">	&lt;/build&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>
<p>可以使用快速入门的方式创建Controller进行访问，此处不再赘述</p>
<h1 id="3springboot原理分析"><a class="markdownIt-Anchor" href="#3springboot原理分析"></a> 3.SpringBoot原理分析</h1>
<h2 id="31起步依赖原理分析"><a class="markdownIt-Anchor" href="#31起步依赖原理分析"></a> 3.1起步依赖原理分析</h2>
<h3 id="311分析spring-boot-starter-parent"><a class="markdownIt-Anchor" href="#311分析spring-boot-starter-parent"></a> 3.1.1分析spring-boot-starter-parent</h3>
<p>按住Ctrl点击pom.xml中的<mark>spring-boot-starter-parent</mark>，跳转到了spring-boot-starter-parent的pom.xml，xml配置如下（只摘抄了部分重点配置）：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../../spring-boot-dependencies<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>按住Ctrl点击pom.xml中的spring-boot-starter-dependencies，跳转到了spring-boot-starter-dependencies的pom.xml，xml配置如下（只摘抄了部分重点配置）：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">activemq.version</span>&gt;</span>5.15.3<span class="tag">&lt;/<span class="name">activemq.version</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">antlr2.version</span>&gt;</span>2.7.7<span class="tag">&lt;/<span class="name">antlr2.version</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">appengine-sdk.version</span>&gt;</span>1.9.63<span class="tag">&lt;/<span class="name">appengine-sdk.version</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">artemis.version</span>&gt;</span>2.4.0<span class="tag">&lt;/<span class="name">artemis.version</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">aspectj.version</span>&gt;</span>1.8.13<span class="tag">&lt;/<span class="name">aspectj.version</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">assertj.version</span>&gt;</span>3.9.1<span class="tag">&lt;/<span class="name">assertj.version</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">atomikos.version</span>&gt;</span>4.0.6<span class="tag">&lt;/<span class="name">atomikos.version</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">bitronix.version</span>&gt;</span>2.1.4<span class="tag">&lt;/<span class="name">bitronix.version</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">build-helper-maven-plugin.version</span>&gt;</span>3.0.0<span class="tag">&lt;/<span class="name">build-helper-maven-plugin.version</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">byte-buddy.version</span>&gt;</span>1.7.11<span class="tag">&lt;/<span class="name">byte-buddy.version</span>&gt;</span></span><br><span class="line">  	... ... ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">      	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      	... ... ...</span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jetbrains.kotlin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>kotlin-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        		<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;kotlin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jooq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jooq-codegen-maven<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        		<span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;jooq.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">          	... ... ...</span><br><span class="line">    	<span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>从上面的spring-boot-starter-dependencies的pom.xml中我们可以发现，<mark>一部分坐标的版本、依赖管理、插件管理已经定义好</mark>，所以我们的SpringBoot工程继承spring-boot-starter-parent后已经具备版本锁定等配置了。所以起步依赖的作用就是进行依赖的传递。</p>
<h3 id="312分析spring-boot-starter-web"><a class="markdownIt-Anchor" href="#312分析spring-boot-starter-web"></a> 3.1.2分析spring-boot-starter-web</h3>
<p>按住Ctrl点击pom.xml中的<mark>spring-boot-starter-web</mark>，跳转到了spring-boot-starter-web的pom.xml，xml配置如下（只摘抄了部分重点配置）：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starters<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Boot Web Starter<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  	<span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate.validator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">version</span>&gt;</span>6.0.9.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      		<span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  	<span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>从上面的spring-boot-starter-web的pom.xml中我们可以发现，spring-boot-starter-web就是<mark>将web开发要使用的spring-web、spring-webmvc等坐标进行了“打包”</mark>，这样我们的工程只要引入spring-boot-starter-web起步依赖的坐标就可以进行web开发了，同样体现了依赖传递的作用</p>
<h2 id="32自动配置原理解析"><a class="markdownIt-Anchor" href="#32自动配置原理解析"></a> 3.2自动配置原理解析</h2>
<ul>
<li>按住Ctrl点击查看启动类MySpringBootApplication上的注解@SpringBootApplication</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySpringBootApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MySpringBootApplication.class);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>注解@SpringBootApplication的源码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(excludeFilters = &#123;</span></span><br><span class="line"><span class="meta">		@Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),</span></span><br><span class="line"><span class="meta">		@Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootApplication &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Exclude specific auto-configuration classes such that they will never be applied.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> the classes to exclude</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@AliasFor(annotation = EnableAutoConfiguration.class)</span></span><br><span class="line">	Class&lt;?&gt;[] exclude() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	... ... ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中有三个核心注解：</p>
<ul>
<li><mark><strong>@SpringBootConfiguration</strong></mark>：等同与@Configuration，既标注该类是Spring的一个配置类</li>
<li><mark><strong>@EnableAutoConfiguration</strong></mark>：SpringBoot自动配置功能开启</li>
<li><mark><strong>@ComponentScan</strong></mark>：组件扫描，默认扫描当前引导类所在包及其子包</li>
</ul>
<p>按住Ctrl点击查看注解@EnableAutoConfiguration：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@AutoConfigurationPackage</span></span><br><span class="line"><span class="meta">@Import(AutoConfigurationImportSelector.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableAutoConfiguration &#123;</span><br><span class="line">	... ... ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中，@Import(AutoConfigurationImportSelector.class) <mark>导入了AutoConfigurationImportSelector类</mark></p>
<p>按住Ctrl点击查看<mark>AutoConfigurationImportSelector</mark>源码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String[] selectImports(AnnotationMetadata annotationMetadata) &#123;</span><br><span class="line">        ... ... ...</span><br><span class="line">        List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata,</span><br><span class="line">                                                                   attributes);</span><br><span class="line">        configurations = removeDuplicates(configurations);</span><br><span class="line">        Set&lt;String&gt; exclusions = getExclusions(annotationMetadata, attributes);</span><br><span class="line">        checkExcludedClasses(configurations, exclusions);</span><br><span class="line">        configurations.removeAll(exclusions);</span><br><span class="line">        configurations = filter(configurations, autoConfigurationMetadata);</span><br><span class="line">        fireAutoConfigurationImportEvents(configurations, exclusions);</span><br><span class="line">        <span class="keyword">return</span> StringUtils.toStringArray(configurations);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> List&lt;String&gt; <span class="title function_">getCandidateConfigurations</span><span class="params">(AnnotationMetadata metadata,</span></span><br><span class="line"><span class="params">			AnnotationAttributes attributes)</span> &#123;</span><br><span class="line">		List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(</span><br><span class="line">				getSpringFactoriesLoaderFactoryClass(), getBeanClassLoader());</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> configurations;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中，SpringFactoriesLoader.loadFactoryNames 方法的作用就是从META-INF/<mark>spring.factories文件中读取指定类对应的类名称列</mark>表：</p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/88f081c6618113316c52a11d9e789c21.png" alt="image-20240312153441044" /></p>
<blockquote>
<p>该spring.factories文件格式为<mark>键值对</mark>，键为<mark>自动配置类全类名</mark>，<mark>值（多个），为该自动配置类<strong>所对应的配置类的全类名</strong></mark></p>
</blockquote>
<ul>
<li>这些配置类定义的Bean会根据条件注解所指定的条件判断是否将其注入到spring容器中</li>
<li>条件判断注解（举例）
<ul>
<li>@ConditionalOnClass：类加载器中是否存在对应的类（引入jar包一般就会有对应的类，就会将该配置类 里面的bean注入到spring容器中）</li>
<li>@ConditionalOnBean：容器中是否存在对应的bean</li>
</ul>
</li>
</ul>
<h1 id="4springboot的配置文件"><a class="markdownIt-Anchor" href="#4springboot的配置文件"></a> 4.SpringBoot的配置文件</h1>
<h2 id="41springboot配置文件的类型及作用"><a class="markdownIt-Anchor" href="#41springboot配置文件的类型及作用"></a> 4.1SpringBoot配置文件的类型及作用</h2>
<h3 id="411配置文件类型及作用"><a class="markdownIt-Anchor" href="#411配置文件类型及作用"></a> 4.1.1配置文件类型及作用</h3>
<p>如果想使用自己的配置替换默认配置的话，就可以使用application.properties或者application.yml（application.yaml）进行配置。</p>
<p>SpringBoot默认会从Resources目录下加载==application.properties或application.yml（application.yaml）==文件</p>
<p>其中，<mark>application.properties文件是键值对类型</mark>的文件，之前一直在使用，所以此处不在对properties文件的格式进行阐述。除了properties文件外，SpringBoot还可以使用yml文件进行配置，下面对yml文件进行讲解。</p>
<h3 id="412-applicationproperties"><a class="markdownIt-Anchor" href="#412-applicationproperties"></a> 4.1.2 application.properties</h3>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据库连接配置</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/mydatabase</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br></pre></td></tr></table></figure>
<h3 id="413-applicationyml或applicationyaml"><a class="markdownIt-Anchor" href="#413-applicationyml或applicationyaml"></a> 4.1.3 application.yml或application.yaml</h3>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据库连接配置</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mydatabase</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br></pre></td></tr></table></figure>
<h3 id="414读取配置文件数据"><a class="markdownIt-Anchor" href="#414读取配置文件数据"></a> 4.1.4读取配置文件数据</h3>
<ul>
<li>application.yml</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">zhangsan</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">18</span></span><br></pre></td></tr></table></figure>
<ul>
<li>读取</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;$&#123;person.name&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="meta">@Value(&quot;$&#123;person.age&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> Integer age;</span><br></pre></td></tr></table></figure>
<h2 id="42配置文件的加载顺序"><a class="markdownIt-Anchor" href="#42配置文件的加载顺序"></a> 4.2配置文件的加载顺序</h2>
<h3 id="421项目内配置文件加载顺序"><a class="markdownIt-Anchor" href="#421项目内配置文件加载顺序"></a> 4.2.1项目内配置文件加载顺序</h3>
<h4 id="1不同目录的配置文件的加载顺序"><a class="markdownIt-Anchor" href="#1不同目录的配置文件的加载顺序"></a> （1）不同目录的配置文件的加载顺序</h4>
<ul>
<li>Springboot程序启动时，会从以下位置加载配置文件：<strong><mark>优先级由高到底，高优先级的配置会覆盖低优先级的配置，没有的配置进行互补配置</mark></strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">优先级1：项目路径下的config文件夹配置文件</span><br><span class="line">优先级2：项目的根目录下面配置文件</span><br><span class="line">优先级3：资源路径下的config文件夹配置文件</span><br><span class="line">优先级4：资源路径下配置文件</span><br></pre></td></tr></table></figure>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/66343a3bc11e857e2c69f5c37e78d6d8.png" alt="在这里插入图片描述" /></p>
<h4 id="2同一目录-不同后缀的配置文件加载顺序"><a class="markdownIt-Anchor" href="#2同一目录-不同后缀的配置文件加载顺序"></a> （2）同一目录、不同后缀的配置文件加载顺序</h4>
<p>当properties、yaml和yml三种<mark>文件路径相同</mark>时，三个文件中的配置信息都会生效，但是当三个文件中有配置信息冲突时，加载顺序是</p>
<p><mark><strong>优先级低的配置会被先加载</strong></mark>，所以<mark>优先级高的配置会覆盖优先级低的配置</mark>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">properties（最高）&gt; yml &gt; yaml(最低)</span><br></pre></td></tr></table></figure>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/368dcc0d0dbc61c863bd9d29f1f1fbb6.png" alt="在这里插入图片描述" /></p>
<ul>
<li>验证：</li>
</ul>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/663c230e37ac7b2c93ae752c779d16b5.png" alt="在这里插入图片描述" /></p>
<h3 id="422外部配置文件"><a class="markdownIt-Anchor" href="#422外部配置文件"></a> 4.2.2外部配置文件</h3>
<p>当我们把项目打包后，如何在配置SpringBoot项目呢？</p>
<h4 id="1命令行参数"><a class="markdownIt-Anchor" href="#1命令行参数"></a> （1）命令行参数</h4>
<p>项目打包好以后，我们可以使用命令行参数的形式，来改变想改变的几个参数，直接在启动命令后添加启动参数，如果有多个配置项，可以用空格分开。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar springboot-configuration.jar --server.port=8088 --server.servlet.context-path=/spring</span><br></pre></td></tr></table></figure>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/22f468f908799ff8606df0ac65cbe82d.png" alt="在这里插入图片描述" /></p>
<h4 id="2spirngconfiglocation"><a class="markdownIt-Anchor" href="#2spirngconfiglocation"></a> （2）spirng.config.location</h4>
<p>在第一种情况下，如果参数数量过多，我们就要考虑配置文件了，我们在启动项目的时候可以用<code>spring.config.location</code>来指定配置文件的新位置。指定的配置文件和jar包中默认加载的配置文件共同起作用形成互补配置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">指定配置文件从F盘下读取</span><br><span class="line">java -jar springboot-configuration.jar --spring.config.location=F:/application.properties</span><br></pre></td></tr></table></figure>
<h2 id="43多环境配置"><a class="markdownIt-Anchor" href="#43多环境配置"></a> 4.3多环境配置</h2>
<h3 id="431多文件配置多个环境"><a class="markdownIt-Anchor" href="#431多文件配置多个环境"></a> 4.3.1多文件配置多个环境</h3>
<ul>
<li>环境区分：</li>
</ul>
<blockquote>
<p>dev：开发环境<br />
test：测试环境<br />
prod：生产环境（线上）</p>
</blockquote>
<ul>
<li>三个环境配置文件</li>
</ul>
<blockquote>
<p>application-dev.yml</p>
<p>application-test.yml</p>
<p>application-prod.yml</p>
</blockquote>
<ul>
<li>指定文件生效：在application.yml指定</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">	<span class="attr">profiles:</span></span><br><span class="line">		<span class="string">active:dev</span></span><br></pre></td></tr></table></figure>
<h3 id="432单个文件配置多个环境"><a class="markdownIt-Anchor" href="#432单个文件配置多个环境"></a> 4.3.2单个文件配置多个环境</h3>
<p>不需要创建多个文件来区分了，直<mark>接以 三个横杠 来当做一个配置文件环境</mark>。</p>
<p>以下案例就是分为了两个环境，然后最上方active来指定对应的profiles环境</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">prod</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8083</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8084</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">prod</span></span><br></pre></td></tr></table></figure>
<h3 id="433补充命令行指定"><a class="markdownIt-Anchor" href="#433补充命令行指定"></a> 4.3.3补充：命令行指定</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar spring-boot-02-config-0.0.1-SNAPSHOT.jar --spring.profiles.active=dev；</span><br></pre></td></tr></table></figure>
<h1 id="5springboot整合其他技术"><a class="markdownIt-Anchor" href="#5springboot整合其他技术"></a> 5.SpringBoot整合其他技术</h1>
<h2 id="51springboot整合junit"><a class="markdownIt-Anchor" href="#51springboot整合junit"></a> 5.1SpringBoot整合Junit</h2>
<h3 id="511添加依赖"><a class="markdownIt-Anchor" href="#511添加依赖"></a> 5.1.1添加依赖</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--测试的起步依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="512编写测试类"><a class="markdownIt-Anchor" href="#512编写测试类"></a> 5.1.2编写测试类</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest(classes = MySpringBootApplication.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapperTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;User&gt; users = userMapper.queryUserList();</span><br><span class="line">        System.out.println(users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中，SpringRunner继承自SpringJUnit4ClassRunner，使用哪一个Spring提供的测试测试引擎都可以</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">SpringRunner</span> <span class="keyword">extends</span> <span class="title class_">SpringJUnit4ClassRunner</span> </span><br></pre></td></tr></table></figure>
<p>@SpringBootTest的属性指定的是引导类的字节码对象</p>
<h3 id="513控制台"><a class="markdownIt-Anchor" href="#513控制台"></a> 5.1.3控制台</h3>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/c48e9e4910921831a8f646b6d3c80d6b.png" alt="image-20240312163241617" /></p>
<h2 id="52springboot整合mybatis"><a class="markdownIt-Anchor" href="#52springboot整合mybatis"></a> 5.2SpringBoot整合Mybatis</h2>
<h3 id="521添加依赖"><a class="markdownIt-Anchor" href="#521添加依赖"></a> 5.2.1添加依赖</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis起步依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="522添加数据库驱动"><a class="markdownIt-Anchor" href="#522添加数据库驱动"></a> 5.2.2添加数据库驱动</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- MySQL连接驱动 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="523添加数据库连接"><a class="markdownIt-Anchor" href="#523添加数据库连接"></a> 5.2.3添加数据库连接</h3>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mydatabase</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br></pre></td></tr></table></figure>
<h3 id="524创建user表"><a class="markdownIt-Anchor" href="#524创建user表"></a> 5.2.4创建user表</h3>
<p>在test数据库中创建user表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for `user`</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `<span class="keyword">user</span>`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">10</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;zhangsan&#x27;</span>, <span class="string">&#x27;123&#x27;</span>, <span class="string">&#x27;张三&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;lisi&#x27;</span>, <span class="string">&#x27;123&#x27;</span>, <span class="string">&#x27;李四&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="525创建实体bean"><a class="markdownIt-Anchor" href="#525创建实体bean"></a> 5.2.5创建实体Bean</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="comment">// 主键</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="comment">// 用户名</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="comment">// 密码</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="comment">// 姓名</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//此处省略getter和setter方法 .. ..</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="526编写mapper接口"><a class="markdownIt-Anchor" href="#526编写mapper接口"></a> 5.2.6编写Mapper接口</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> List&lt;User&gt; <span class="title function_">queryUserList</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="527配置mapper映射文件"><a class="markdownIt-Anchor" href="#527配置mapper映射文件"></a> 5.2.7配置Mapper映射文件</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="528在applicationproperties添加映射文件信息"><a class="markdownIt-Anchor" href="#528在applicationproperties添加映射文件信息"></a> 5.2.8在application.properties添加映射文件信息</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#spring集成Mybatis环境</span><br><span class="line">#pojo别名扫描包</span><br><span class="line">mybatis.type-aliases-package=com.itheima.domain</span><br><span class="line">#加载Mybatis映射文件</span><br><span class="line">mybatis.mapper-locations=classpath:mapper/*Mapper.xml</span><br></pre></td></tr></table></figure>
<h3 id="529controller层"><a class="markdownIt-Anchor" href="#529controller层"></a> 5.2.9controller层</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MapperController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/queryUser&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">queryUser</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; users = userMapper.queryUserList();</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5210测试"><a class="markdownIt-Anchor" href="#5210测试"></a> 5.2.10测试</h3>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/18b534a699c0885524939445bd45b6e6.png" alt="在这里插入图片描述" /></p>
<h2 id="53springboot整合redis"><a class="markdownIt-Anchor" href="#53springboot整合redis"></a> 5.3SpringBoot整合Redis</h2>
<ul>
<li>笔记链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_61440595/article/details/136340966">【Redis | 第三篇】Springboot整合Redis</a></li>
</ul>
<h2 id="54springboot整合mybatis-plus"><a class="markdownIt-Anchor" href="#54springboot整合mybatis-plus"></a> 5.4SpringBoot整合Mybatis Plus</h2>
<h3 id="541导入依赖"><a class="markdownIt-Anchor" href="#541导入依赖"></a> 5.4.1导入依赖</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mybatisPlus 核心库 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="542yml配置"><a class="markdownIt-Anchor" href="#542yml配置"></a> 5.4.2yml配置</h3>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10100</span>   <span class="comment">#  配置启动端口号</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">config-location:</span> <span class="string">classpath:mybatis.cfg.xml</span>    <span class="comment">#  mybatis主配置文件所在路径</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.demo.drools.entity</span>  <span class="comment">#  定义所有操作类的别名所在包</span></span><br><span class="line">  <span class="attr">mapper-locations:</span>                                     <span class="comment">#  所有的mapper映射文件</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="attr">spring:</span> <span class="comment">#springboot的配置</span></span><br><span class="line">  <span class="attr">datasource:</span> <span class="comment">#定义数据源</span></span><br><span class="line">    <span class="comment">#127.0.0.1为本机测试的ip，3306是mysql的端口号。serverTimezone是定义时区，照抄就好，mysql高版本需要定义这些东西</span></span><br><span class="line">    <span class="comment">#useSSL也是某些高版本mysql需要问有没有用SSL连接</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/test?serverTimezone=GMT%2B8&amp;useSSL=FALSE</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span>  <span class="comment">#数据库用户名，root为管理员</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span> <span class="comment">#该数据库用户的密码</span></span><br><span class="line">    <span class="comment"># 使用druid数据源</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># mybatis-plus相关配置</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="comment"># xml扫描，多个目录用逗号或者分号分隔（告诉 Mapper 所对应的 XML 文件位置）</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="comment"># 以下配置均有默认值,可以不设置</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment">#主键类型 AUTO:&quot;数据库ID自增&quot; INPUT:&quot;用户输入ID&quot;,ID_WORKER:&quot;全局唯一ID (数字类型唯一ID)&quot;, UUID:&quot;全局唯一ID UUID&quot;;</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line">      <span class="comment">#字段策略 IGNORED:&quot;忽略判断&quot;  NOT_NULL:&quot;非 NULL 判断&quot;)  NOT_EMPTY:&quot;非空判断&quot;</span></span><br><span class="line">      <span class="attr">field-strategy:</span> <span class="string">NOT_EMPTY</span></span><br><span class="line">      <span class="comment">#数据库类型</span></span><br><span class="line">      <span class="attr">db-type:</span> <span class="string">MYSQL</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="comment"># 是否开启自动驼峰命名规则映射:从数据库列名到Java属性驼峰命名的类似映射</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 如果查询结果中包含空值的列，则 MyBatis 在映射的时候，不会映射这个字段</span></span><br><span class="line">    <span class="attr">call-setters-on-nulls:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 这个配置会将执行的sql打印出来，在开发或测试的时候可以用</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>
<h3 id="543用户信息实体"><a class="markdownIt-Anchor" href="#543用户信息实体"></a> 5.4.3用户信息实体</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;user_info&quot;)</span><span class="comment">//@TableName中的值对应着表名</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserInfoEntity</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 主键</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@TableId</span>中可以决定主键的类型,不写会采取默认值,默认值可以在yml中配置</span></span><br><span class="line"><span class="comment">     * AUTO: 数据库ID自增</span></span><br><span class="line"><span class="comment">     * INPUT: 用户输入ID</span></span><br><span class="line"><span class="comment">     * ID_WORKER: 全局唯一ID，Long类型的主键</span></span><br><span class="line"><span class="comment">     * ID_WORKER_STR: 字符串全局唯一ID</span></span><br><span class="line"><span class="comment">     * UUID: 全局唯一ID，UUID类型的主键</span></span><br><span class="line"><span class="comment">     * NONE: 该类型为未设置主键类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 姓名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 年龄</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 技能</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String skill;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 评价</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String evaluate;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Long fraction;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="544配置类"><a class="markdownIt-Anchor" href="#544配置类"></a> 5.4.4配置类</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * mybatis-plus SQL执行效率插件【生产环境可以关闭】</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PerformanceInterceptor <span class="title function_">performanceInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PerformanceInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 分页插件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PaginationInterceptor <span class="title function_">paginationInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PaginationInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="545启动类"><a class="markdownIt-Anchor" href="#545启动类"></a> 5.4.5启动类</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//@MapperScan和dao层添加@Mapper注解意思一样</span></span><br><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.demo.drools.dao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DroolsApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(DroolsApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="546dao层"><a class="markdownIt-Anchor" href="#546dao层"></a> 5.4.6Dao层</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserInfoDao</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;UserInfoEntity&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="547service层"><a class="markdownIt-Anchor" href="#547service层"></a> 5.4.7Service层</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserInfoService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;UserInfoEntity&gt; &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserInfoSerivceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserInfoDao, UserInfoEntity&gt; <span class="keyword">implements</span> <span class="title class_">UserInfoService</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="548扩展mybatis-plus的核心"><a class="markdownIt-Anchor" href="#548扩展mybatis-plus的核心"></a> 5.4.8扩展：Mybatis Plus的核心</h3>
<p>Mybatis Plus的核心为<mark>QueryWrapper、UpdateWrapper</mark></p>
<ol>
<li><strong>QueryWrapper</strong>： <mark>Entity 对象封装操作</mark></li>
<li><strong>UpdateWrapper</strong> ： Update 条件封装，用于Entity对象更新操作</li>
<li>条件构造器使用中的各个方法格式和说明</li>
</ol>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/41adce7bc751fb31ab05f4f2d79974c2.png" alt="img" /></p>
<h2 id="55springboot整合rabbitmq"><a class="markdownIt-Anchor" href="#55springboot整合rabbitmq"></a> 5.5SpringBoot整合RabbitMQ</h2>
<ul>
<li>笔记链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_61440595/article/details/135913702">【RabbitMQ篇】Springboot整合RabbiMQ</a></li>
</ul>
<h1 id="6springboot实现拦截器"><a class="markdownIt-Anchor" href="#6springboot实现拦截器"></a> 6.SpringBoot实现拦截器</h1>
<h2 id="61拦截器介绍"><a class="markdownIt-Anchor" href="#61拦截器介绍"></a> 6.1拦截器介绍</h2>
<p><strong>拦截器(Interceptor)同</strong> Filter 过滤器一样，它俩都是面向切面编程——<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=AOP&amp;spm=1001.2101.3001.7020">AOP</a> 的具体实现（AOP切面编程只是一种编程思想而已）。</p>
<p>你可以使用 Interceptor 来执行某些任务，例如在 <strong>Controller</strong> 处理请求之前编写日志，添加或更新配置…</p>
<p>在 <strong>Spring中</strong>，当请求发送到 <strong>Controller</strong> 时，在被<strong>Controller</strong>处理之前，它必须经过 <strong>Interceptors</strong>（0或多个）。</p>
<h2 id="62拦截器作用"><a class="markdownIt-Anchor" href="#62拦截器作用"></a> 6.2拦截器作用</h2>
<ol>
<li><mark><strong>日志记录</strong></mark>：记录请求信息的日志，以便进行信息监控、信息统计、计算 PV（Page View）等；</li>
<li><mark><strong>权限检查</strong></mark>：如登录检测，进入处理器检测是否登录；</li>
<li><mark><strong>性能监控</strong></mark>：通过拦截器在进入处理器之前记录开始时间，在处理完后记录结束时间，从而得到该请求的处理时间。（反向代理，如 Apache 也可以自动记录）</li>
<li><mark><strong>通用行为</strong></mark>：读取 Cookie 得到用户信息并将用户对象放入请求，从而方便后续流程使用，还有如提取 Locale、Theme 信息等，只要是多个处理器都需要的即可使用拦截器实现。</li>
</ol>
<h2 id="63自定义拦截器"><a class="markdownIt-Anchor" href="#63自定义拦截器"></a> 6.3自定义拦截器</h2>
<p>如果你需要自定义 Interceptor 的话必须实现 <mark>org.springframework.web.servlet.HandlerInterceptor接口</mark>或继承 org.springframework.web.servlet.handler.HandlerInterceptorAdapter类，并且需要重写下面下面 3 个方法：</p>
<ol>
<li><mark><strong>preHandler</strong></mark>(HttpServletRequest request, HttpServletResponse response, Object handler) <mark>方法在请求处理之前被调用</mark>。该方法在 Interceptor 类中最先执行，用来进行一些前置初始化操作或是对当前请求做预处理，也可以进行一些判断来决定请求是否要继续进行下去。该方法的返回至是 Boolean 类型，当它返回 false 时，表示请求结束，后续的 Interceptor 和 Controller 都不会再执行；<mark>当它返回为 true 时会继续调用下一个 Interceptor 的 preHandle 方法</mark>，如果已经是最后一个 Interceptor 的时候就会调用当前请求的 Controller 方法。</li>
<li><mark><strong>postHandler</strong></mark>(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) 方法在<mark>当前请求处理完成之后，也就是 Controller 方法调用之后执行</mark>，但是它<mark>会在 DispatcherServlet 进行视图返回渲染之前被调用</mark>，所以我们可以在这个方法中对 Controller 处理之后的 ModelAndView 对象进行操作。</li>
<li><mark><strong>afterCompletion(</strong><mark>HttpServletRequest request, HttpServletResponse response, Object handle, Exception ex) 方法</mark>需要在当前对应的 Interceptor 类的 postHandler 方法返回值为 true 时才会执行</mark>。顾名思义，该方法将在整个请求结束之后，也就是<mark>在 DispatcherServlet 渲染了对应的视图之后执行</mark>。此方法主要用来进行资源清理。</li>
</ol>
<h3 id="631loginterceptor类"><a class="markdownIt-Anchor" href="#631loginterceptor类"></a> 6.3.1LogInterceptor类</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogInterceptor</span> <span class="keyword">extends</span> <span class="title class_">HandlerInterceptorAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;\n-------- LogInterception.preHandle --- &quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Request URL: &quot;</span> + request.getRequestURL());</span><br><span class="line">        System.out.println(<span class="string">&quot;Start Time: &quot;</span> + System.currentTimeMillis());</span><br><span class="line"></span><br><span class="line">        request.setAttribute(<span class="string">&quot;startTime&quot;</span>, startTime);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;\n-------- LogInterception.postHandle --- &quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Request URL: &quot;</span> + request.getRequestURL());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;\n-------- LogInterception.afterCompletion --- &quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> (Long) request.getAttribute(<span class="string">&quot;startTime&quot;</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;Request URL: &quot;</span> + request.getRequestURL());</span><br><span class="line">        System.out.println(<span class="string">&quot;End Time: &quot;</span> + endTime);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;Time Taken: &quot;</span> + (endTime - startTime));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="632oldlogininterceptor类"><a class="markdownIt-Anchor" href="#632oldlogininterceptor类"></a> 6.3.2OldLoginInterceptor类</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OldLoginInterceptor</span> <span class="keyword">extends</span> <span class="title class_">HandlerInterceptorAdapter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;\n-------- OldLoginInterceptor.preHandle --- &quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;Request URL: &quot;</span> + request.getRequestURL());</span><br><span class="line">        System.out.println(<span class="string">&quot;Sorry! This URL is no longer used, Redirect to /admin/login&quot;</span>);</span><br><span class="line"></span><br><span class="line">        response.sendRedirect(request.getContextPath()+ <span class="string">&quot;/admin/login&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;\n-------- OldLoginInterceptor.postHandle --- &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;\n-------- OldLoginInterceptor.afterCompletion --- &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="633配置拦截器"><a class="markdownIt-Anchor" href="#633配置拦截器"></a> 6.3.3配置拦截器</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">LogInterceptor</span>());</span><br><span class="line"></span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">OldLoginInterceptor</span>()).addPathPatterns(<span class="string">&quot;/admin/oldLogin&quot;</span>);</span><br><span class="line"></span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">AdminInterceptor</span>()).addPathPatterns(<span class="string">&quot;/admin/*&quot;</span>).excludePathPatterns(<span class="string">&quot;/admin/oldLogin&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>LogInterceptor 拦截器用于拦截所有请求； OldLoginInterceptor 用来拦截链接 “ / admin / oldLogin”，它将重定向到新的 “ / admin / login”。；AdminInterceptor用来拦截链接 “/admin/*”，除了链接 “ / admin / oldLogin”。</li>
</ul>
<h2 id="64应用"><a class="markdownIt-Anchor" href="#64应用"></a> 6.4应用</h2>
<h3 id="641性能监控"><a class="markdownIt-Anchor" href="#641性能监控"></a> 6.4.1性能监控</h3>
<blockquote>
<p>如记录一下请求的处理时间，得到一些<mark>慢请求（如处理时间超过500毫秒）</mark>，从而进行性能改进，一般的反向代理服务器如 apache 都具有这个功能，但此处我们演示一下使用拦截器怎么实现。</p>
</blockquote>
<ul>
<li>
<p>实现分析</p>
<ul>
<li>在<mark>进入处理器之前记录开始时间</mark>，即在拦截器的 <mark>preHandle</mark> 记录开始时间；</li>
<li>在<mark>结束请求处理之后记录结束时间</mark>，即在拦截器的 <mark>afterCompletion</mark> 记录结束实现，并用结束时间-开始时间得到这次请求的处理时间</li>
</ul>
</li>
<li>
<p>问题：</p>
<ul>
<li>
<p>我们的拦截器是单例，因此<mark>不管用户请求多少次都只有一个拦截器实现</mark>，即  <mark><strong>线程不安全</strong></mark>，那我们应该怎么记录时间呢？</p>
</li>
<li>
<p>解决方案是使用 <mark>ThreadLocal</mark>，它是线程绑定的变量，提供线程<mark>局部变量（一个线程一个 ThreadLocal</mark>，A线程的ThreadLocal 只能看到A线程的 ThreadLocal，不能看到B线程的 ThreadLocal）。</p>
</li>
<li>
<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StopWatchHandlerInterceptor</span> <span class="keyword">extends</span> <span class="title class_">HandlerInterceptorAdapter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> NamedThreadLocal&lt;Long&gt; startTimeThreadLocal = <span class="keyword">new</span> <span class="title class_">NamedThreadLocal</span>&lt;&gt;(<span class="string">&quot;StopWatch-StartTime&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(StopWatchHandlerInterceptor.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">beginTime</span> <span class="operator">=</span> System.currentTimeMillis();<span class="comment">//1、开始时间</span></span><br><span class="line">        startTimeThreadLocal.set(beginTime);<span class="comment">//线程绑定变量（该数据只有当前请求的线程可见）</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//继续流程</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();<span class="comment">//2、结束时间</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">beginTime</span> <span class="operator">=</span> startTimeThreadLocal.get();<span class="comment">//得到线程绑定的局部变量（开始时间）</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">consumeTime</span> <span class="operator">=</span> endTime - beginTime;<span class="comment">//3、消耗的时间</span></span><br><span class="line">        <span class="keyword">if</span>(consumeTime &gt; <span class="number">500</span>) &#123;<span class="comment">//此处认为处理时间超过500毫秒的请求为慢请求</span></span><br><span class="line">            <span class="comment">//TODO 记录到日志文件</span></span><br><span class="line">            logger.info(String.format(<span class="string">&quot;%s consume %d millis&quot;</span>, request.getRequestURI(), consumeTime));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//测试的时候由于请求时间未超过500，所以启用该代码</span></span><br><span class="line"><span class="comment">//        logger.info(String.format(&quot;%s consume %d millis&quot;, request.getRequestURI(), consumeTime));</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>NamedThreadLocal：Spring提供的一个命名的ThreadLocal实现。</p>
<p>在测试时需要把 stopWatchHandlerInterceptor 放在拦截器链的第一个，这样得到的时间才是比较准确的。</p>
</blockquote>
</li>
<li>
<p>拦截器配置类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">StopWatchHandlerInterceptor</span>());</span><br><span class="line"></span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">OldLoginInterceptor</span>()).addPathPatterns(<span class="string">&quot;/admin/oldLogin&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="642登录检测"><a class="markdownIt-Anchor" href="#642登录检测"></a> 6.4.2登录检测</h3>
<blockquote>
<p>在访问某些资源时（如订单页面），需要用户登录后才能查看，因此需要进行登录检测。</p>
</blockquote>
<ul>
<li>
<p>流程</p>
<ol>
<li>访问需要登录的资源时，由拦截器重定向到登录页面；</li>
<li>如果访问的是登录页面，拦截器不应该拦截；</li>
<li>用户登录成功后，往 cookie/session 添加登录成功的标识（如用户编号）；</li>
<li>下次请求时，拦截器通过判断 cookie/session 中是否有该标识来决定继续流程还是到登录页面；</li>
<li>在此拦截器还应该允许游客访问的资源。</li>
</ol>
</li>
<li>
<p>代码实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">ip</span> <span class="operator">=</span> request.getRemoteAddr();</span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        request.setAttribute(<span class="string">&quot;requestStartTime&quot;</span>, startTime);</span><br><span class="line">        <span class="keyword">if</span> (handler <span class="keyword">instanceof</span> ResourceHttpRequestHandler) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;preHandle这是一个静态资源方法！&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (handler <span class="keyword">instanceof</span> HandlerMethod) &#123;</span><br><span class="line">            <span class="type">HandlerMethod</span> <span class="variable">handlerMethod</span> <span class="operator">=</span> (HandlerMethod) handler;</span><br><span class="line">            <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> handlerMethod.getMethod();</span><br><span class="line">            System.out.println(<span class="string">&quot;用户:&quot;</span> + ip + <span class="string">&quot;,访问目标:&quot;</span> + method.getDeclaringClass().getName() + <span class="string">&quot;.&quot;</span> + method.getName());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果用户未登录</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) request.getSession().getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == user) &#123;</span><br><span class="line">            <span class="comment">//重定向到登录页面</span></span><br><span class="line">            response.sendRedirect(<span class="string">&quot;toLogin&quot;</span>);</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">if</span> (handler <span class="keyword">instanceof</span> ResourceHttpRequestHandler) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;postHandle这是一个静态资源方法！&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (handler <span class="keyword">instanceof</span> HandlerMethod) &#123;</span><br><span class="line">            <span class="type">HandlerMethod</span> <span class="variable">handlerMethod</span> <span class="operator">=</span> (HandlerMethod) handler;</span><br><span class="line">            <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> handlerMethod.getMethod();</span><br><span class="line">            <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> (<span class="type">long</span>) request.getAttribute(<span class="string">&quot;requestStartTime&quot;</span>);</span><br><span class="line">            <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">            <span class="type">long</span> <span class="variable">executeTime</span> <span class="operator">=</span> endTime - startTime;</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">time</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line">            <span class="comment">//打印方法执行时间</span></span><br><span class="line">            <span class="keyword">if</span> (executeTime &gt; time) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;[&quot;</span> + method.getDeclaringClass().getName() + <span class="string">&quot;.&quot;</span> + method.getName() + <span class="string">&quot;] 执行耗时 : &quot;</span></span><br><span class="line">                        + executeTime + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;[&quot;</span> + method.getDeclaringClass().getSimpleName() + <span class="string">&quot;.&quot;</span> + method.getName() + <span class="string">&quot;] 执行耗时 : &quot;</span></span><br><span class="line">                        + executeTime + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="7文件上传下载"><a class="markdownIt-Anchor" href="#7文件上传下载"></a> 7.文件上传/下载</h1>
<h2 id="71文件上传下载流程概述"><a class="markdownIt-Anchor" href="#71文件上传下载流程概述"></a> 7.1文件上传/下载流程概述</h2>
<h3 id="711文件上传"><a class="markdownIt-Anchor" href="#711文件上传"></a> 7.1.1文件上传</h3>
<ol>
<li>当客户端发送文件上传请求时，Spring Boot会接收到一个包含文件的<mark>MultipartHttpServletRequest对象</mark>。</li>
<li>在控制器方法中，可以<mark>通过参数接收这个MultipartHttpServletRequest对象</mark>，并从中获取上传的文件。</li>
<li>Spring Boot会将上传的文件存储到临时目录中，可以通<mark>过MultipartFile对象的getOriginalFilename()方法获取文件名</mark>，通过<mark>getBytes()方法获取文件内容</mark>。</li>
<li>文件上传后，可以将其保存到服务器的持久化存储中，例如本地磁盘、云存储等。</li>
</ol>
<h3 id="712文件下载"><a class="markdownIt-Anchor" href="#712文件下载"></a> 7.1.2文件下载</h3>
<ol>
<li>当客户端发送文件下载请求时，Spring Boot会<mark>根据请求的URL找到对应的文件</mark>。</li>
<li>找到文件后，需要<mark>将文件的内容写入到Response的输出流中</mark>，为了防止浏览器解析，需要在响应头中设置正确的MIME类型（Content-Type）。</li>
<li>如果要实现断点续传功能，需要根据文件的元数据信息判断是否已经下载过该文件，如果已经下载过，则直接返回已存在的文件内容即可。</li>
</ol>
<h2 id="72实现过程"><a class="markdownIt-Anchor" href="#72实现过程"></a> 7.2实现过程</h2>
<h3 id="721添加依赖"><a class="markdownIt-Anchor" href="#721添加依赖"></a> 7.2.1添加依赖</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="722配置文件上传大小限制"><a class="markdownIt-Anchor" href="#722配置文件上传大小限制"></a> 7.2.2配置文件上传大小限制</h3>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">18080</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">multipart:</span></span><br><span class="line">      <span class="attr">max-file-size:</span> <span class="string">10MB</span></span><br><span class="line">      <span class="attr">max-request-size:</span> <span class="string">10MB</span></span><br></pre></td></tr></table></figure>
<h3 id="723上传控制器"><a class="markdownIt-Anchor" href="#723上传控制器"></a> 7.2.3上传控制器</h3>
<ul>
<li>创建一个控制器类，用于处理文件上传请求。在这个类中，使用<code>@PostMapping</code><mark>注解指定处理POST请求的方法</mark>，并使用<code>@RequestParam(&quot;file&quot;) MultipartFile file</code>参数接收上传的文件。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建文件上传控制器  </span></span><br><span class="line"><span class="meta">@RestController</span>  </span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/upload&quot;)</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileUploadController</span> &#123;  </span><br><span class="line">    <span class="comment">// 处理文件上传请求的POST方法  </span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/&quot;)</span>  </span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;String&gt; <span class="title function_">handleFileUpload</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile file)</span> &#123;  </span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            <span class="comment">// 获取上传文件的文件名  </span></span><br><span class="line">            <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> file.getOriginalFilename();  </span><br><span class="line">            <span class="comment">// 将文件保存到磁盘或执行其他操作，这里只是简单地将文件保存到静态资源目录下  </span></span><br><span class="line">            file.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:/&quot;</span> + fileName));  </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(<span class="string">&quot;文件上传成功！&quot;</span>, HttpStatus.OK);  </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;  </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(<span class="string">&quot;文件上传失败：&quot;</span> + e.getMessage(), HttpStatus.INTERNAL_SERVER_ERROR);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="724下载控制器"><a class="markdownIt-Anchor" href="#724下载控制器"></a> 7.2.4下载控制器</h3>
<ol>
<li>创建一个控制器类，用于处理文件下载请求。在这个类中，我们将使用@GetMapping注解指定处理GET请求的方法，并使用@RequestParam(“filename”) String fileName参数接收要下载的文件名。然后，我们可以使用文件名来获取要下载的文件，并将其作为响应返回给客户端。</li>
<li>为了让Spring Boot能够找到静态资源（如文件），你需要在<code>src/main/resources</code>目录下创建一个名为<code>static</code>的文件夹，并在其中创建一个名为<code>files</code>的文件夹，用于存放要下载的文件。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/api/download&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileDownloadController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(FileDownloadController.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ResourceLoader resourceLoader;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理文件下载请求的GET方法，通过文件名获取文件并返回给客户端下载</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;filename:.+&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseEntity&lt;Resource&gt; <span class="title function_">handleFileDownload</span><span class="params">(<span class="meta">@PathVariable</span> String filename)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 获取要下载的文件的Resource对象，这里假设文件保存在静态资源目录下的files文件夹中</span></span><br><span class="line">        <span class="type">Resource</span> <span class="variable">resource</span> <span class="operator">=</span> resourceLoader.getResource(<span class="string">&quot;classpath:static/files/&quot;</span> + filename);</span><br><span class="line">        <span class="keyword">if</span> (resource == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(HttpStatus.NOT_FOUND);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 将文件内容包装为响应体，并设置响应头信息，提示浏览器下载文件而不是打开文件</span></span><br><span class="line">        <span class="type">InputStreamResource</span> <span class="variable">inputStreamResource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamResource</span>(resource.getInputStream());</span><br><span class="line">        <span class="type">HttpHeaders</span> <span class="variable">headers</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpHeaders</span>();</span><br><span class="line">        headers.add(HttpHeaders.CONTENT_DISPOSITION, <span class="string">&quot;attachment; filename=&quot;</span> + filename);</span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.ok()</span><br><span class="line">                .headers(headers)</span><br><span class="line">                .contentType(MediaTypeFactory.getMediaType(resource).get())</span><br><span class="line">                .body(inputStreamResource);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="8springboot访问静态资源"><a class="markdownIt-Anchor" href="#8springboot访问静态资源"></a> 8.SpringBoot访问静态资源</h1>
<h2 id="81何为静态资源"><a class="markdownIt-Anchor" href="#81何为静态资源"></a> 8.1何为静态资源？</h2>
<p>静态资源，一般是网页端的：<strong>HTML文件、JavaScript文件和图片</strong>。尤其是<strong>设置图片的静态资源</strong>，尤其重要：</p>
<h2 id="82设置访问静态资源的两种方法"><a class="markdownIt-Anchor" href="#82设置访问静态资源的两种方法"></a> 8.2设置访问静态资源的两种方法</h2>
<ul>
<li>Springboot内设置静态资源，或者说静态资源文件夹，主要有两种方法（均为SpringMVC实现）：
<ul>
<li>在<code>application.yml</code>/<code>application.properties</code>内配置。</li>
<li>设置<code>Configuration配置类</code>。</li>
</ul>
</li>
</ul>
<p>以上两种方法，均可实现用户访问网址，不走Controller层的拦截，直接进行静态文件访问。</p>
<h3 id="821application设置方法"><a class="markdownIt-Anchor" href="#821application设置方法"></a> 8.2.1application设置方法</h3>
<h4 id="1配置详讲"><a class="markdownIt-Anchor" href="#1配置详讲"></a> （1）配置详讲</h4>
<ul>
<li>
<p><code>spring.mvc.static-path-pattern</code>：根据官网的描述和实际效果，可以理解为**<mark>静态文件URL匹配头</mark>**，也就是静态文件的URL地址开头。Springboot默认为：<code>/**</code>。</p>
</li>
<li>
<p><code>spring.web.resources.static-locations</code>：根据官网的描述和实际效果，可以理解为==<strong>实际静态文件地址</strong>==，也就是静态文件URL后，<mark>匹配的实际静态文件</mark>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Springboot默认为：</span><br><span class="line">classpath:/META-INF/resources/,classpath:/resources/,classpath:/static/,classpath:/public/</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>注意：</p>
<ul>
<li><mark>spring.web.resources.static-locations是后续配置</mark>，旧版Springboot的配置项为：spring-resources-static-locations；在2.2.5版本之后，旧版本配置已经失效。</li>
<li><mark>spring.web.resources.static-locations有多个配置项</mark>，在Springboot编译后，会<mark>合并为一个文件</mark>。多个配置文件，使用,进行分割。</li>
<li><mark>spring.web.resources.static-location仅仅允许一个配置</mark>，无法使用,进行分割，如果需要多个静态资源文件，可以使用下文的配置类方法。</li>
<li>spring.web.resources.static-locations可以使用classpath、file进行匹配。<mark>如果使用file，这个时候的相对路径为项目地址</mark>（打包为.jar后，<mark>相对路径就是.jar运行地址）</mark>。</li>
</ul>
</li>
</ul>
<h4 id="2实践"><a class="markdownIt-Anchor" href="#2实践"></a> （2）实践</h4>
<ul>
<li>
<p>最终效果：</p>
<ul>
<li>
<p>浏览器输入：<code>http://localhost:8088/SystemData/UserData/Avatar/Mintimate.jpeg</code></p>
</li>
<li>
<p>可以直接访问项目文件下的：<code>/SystemData/UserData/Avatar/Mintimate.jpeg</code></p>
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/b5512573e7eea52e6388f6bd51fb5198.png" alt="就是这个文件了嗷" /></p>
</li>
</ul>
</li>
<li>
<p>配置文件：</p>
</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">  	<span class="comment"># URL响应地址（Springboot默认为/**)</span></span><br><span class="line">    <span class="attr">static-path-pattern:</span> <span class="string">/SystemData/**</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">      <span class="comment"># 静态文件地址，保留官方内容后，进行追加</span></span><br><span class="line">      <span class="attr">static-locations:</span> <span class="string">classpath:/static,classpath:/public,classpath:/resources,classpath:/META-INF/resources,file:SystemData</span></span><br></pre></td></tr></table></figure>
<p>其中，<code>file:SystemData</code>就是映射本地文件了。</p>
<h4 id="3优缺点"><a class="markdownIt-Anchor" href="#3优缺点"></a> （3）优缺点</h4>
<ul>
<li>优点：简单粗暴</li>
<li>缺点：
<ul>
<li>URL响应地址只能为一项，也就是<code>spring.mvc.static-path-pattern</code>配置只能写一项</li>
<li>上文设置了<code>/SystemData/**</code>为URL匹配，就不能设置第二个<code>/resources/**</code>这样的配置为第二静态目录</li>
<li>如果需要设置多个地址为静态资源目录，可以参考下文的<code>设置配置类方法</code>方法。</li>
</ul>
</li>
</ul>
<h3 id="822设置配置类方法"><a class="markdownIt-Anchor" href="#822设置配置类方法"></a> 8.2.2设置配置类方法</h3>
<h4 id="1方法介绍"><a class="markdownIt-Anchor" href="#1方法介绍"></a> （1）方法介绍</h4>
<p>写一个配置类，实现静态资源的文件夹方法很多。比如：</p>
<ul>
<li>
<p>继承于<code>WebMvcConfigurationSupport</code>父类，并实现<code>addResourceHandlers</code>方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里的<code>registry</code>使用链式编程,方法为：</p>
<ul>
<li><code>addResourceHandler</code>：添加URL响应地址目录。</li>
<li><code>addResourceLocations</code>：添加实际资源目录。</li>
</ul>
</blockquote>
</li>
<li>
<p>引用<code>WebMvcConfigurer</code>接口，并<mark>实现<code>addInterceptors</code>方法（常用）</mark></p>
</li>
</ul>
<blockquote>
<p>一些文章可能会让你继承于<code>WebMvcConfigurerAdapter</code>方法，但是实际上<code>WebMvcConfigurerAdapter</code>方法在Spring5.0和Springboot2.0之后，已经弃用。</p>
</blockquote>
<h4 id="2实践-2"><a class="markdownIt-Anchor" href="#2实践-2"></a> （2）实践</h4>
<ul>
<li>
<p>最终效果1：</p>
<ul>
<li>浏览器输入：<code>http://localhost:8088/SystemData/UserData/Avatar/Mintimate.jpeg</code></li>
<li>可以直接访问项目文件下的：<code>/SystemData/UserData/Avatar/Mintimate.jpeg</code>，</li>
</ul>
</li>
<li>
<p>最终效果2：</p>
<ul>
<li>浏览器输入：<code>http://localhost:8088/SystemDataTest/UserData/Avatar/Mintimate.jpeg</code></li>
<li>可以直接访问项目文件下的：<code>/Test/UserData/Avatar/Demo.jpeg</code>，</li>
</ul>
</li>
<li>
<p>添加一个配置类，并继承<code>WebMvcConfigurationSupport</code>，实现<code>addResourceHandlers</code>方法，并打上<code>@Configuration</code>注解，使其成为配置类：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">//定位到项目文件夹下的SystemData文件夹</span></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> String IMG_PATH=System.getProperty(<span class="string">&quot;user.dir&quot;</span>)+<span class="string">&quot;/SystemData/&quot;</span>;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> String IMG_PATH_TWO=System.getProperty(<span class="string">&quot;user.dir&quot;</span>)+<span class="string">&quot;/Test/&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/SystemData/**)&quot;</span>)</span><br><span class="line">            	.addResourceLocations(<span class="string">&quot;file:&quot;</span>IMG_PATH);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/SystemDataTest/**)&quot;</span>)</span><br><span class="line">            	.addResourceLocations(<span class="string">&quot;file:&quot;</span>IMG_PATH_TWO);</span><br><span class="line">        <span class="built_in">super</span>.addResourceHandlers(registry);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3优缺点-2"><a class="markdownIt-Anchor" href="#3优缺点-2"></a> （3）优缺点</h4>
<ul>
<li>相比前文，这样的配置更麻烦。</li>
<li>相比前文，这样的可塑性更高：可以添加更多的映射、不会对默认配置造成覆盖等。</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>SpringBoot基础篇</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://www.haipeng-lin.cn/posts/18bf100b.html">https://www.haipeng-lin.cn/posts/18bf100b.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a" style="display: inline-block;width: 120px"><h>作者</h><div class="post-copyright-cc-info"><h>拾忆鱼</h></div></div><div class="post-copyright-c" style="display: inline-block;width: 120px"><h>发布于</h><div class="post-copyright-cc-info"><h>2024-08-28</h></div></div><div class="post-copyright-u" style="display: inline-block;width: 120px"><h>更新于</h><div class="post-copyright-cc-info"><h>2024-09-01</h></div></div><div class="post-copyright-c" style="display: inline-block;width: 120px"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SpringBoot/">SpringBoot</a></div><div class="post_share"><div class="social-share" data-image="https://i-blog.csdnimg.cn/blog_migrate/2b37069e05120f2696d7a1cb32152359.jpeg#pic_center" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://lib.baomitu.com/social-share.js/1.0.16/css/share.min.css" media="print" onload="this.media='all'"><script src="https://lib.baomitu.com/social-share.js/1.0.16/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/f7912a82.html"><img class="prev-cover" src="https://gitee.com/linhaipengg/md_-picture/raw/master/算法.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">力扣刷题</div></div></a></div><div class="next-post pull-right"><a href="/posts/cad0ef34.html"><img class="next-cover" src="https://i-blog.csdnimg.cn/blog_migrate/8b006bcffd7adfd9c9b5e64e8ac1b65f.jpeg#pic_center" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">SpringMVC框架篇</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/172c1a2d.html" title="ElasticSearch学习笔记"><img class="cover" src="https://haipeng-lin.oss-cn-shenzhen.aliyuncs.com/202410161138400.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-16</div><div class="title">ElasticSearch学习笔记</div></div></a></div><div><a href="/posts/4ebad2d4.html" title="SpringBoot整合Redis"><img class="cover" src="https://i-blog.csdnimg.cn/blog_migrate/fc6ebdd5464d6c592f3363bc942cf14f.jpeg#pic_center" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-30</div><div class="title">SpringBoot整合Redis</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://haipeng-lin.oss-cn-shenzhen.aliyuncs.com/202410101530409.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">拾忆鱼</div><div class="author-info__description">一条菜鱼的小破站</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">61</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">小菜鱼正在从CSDN博客搬家，尽请期待　　      地址：<a target="_blank" rel="noopener" href="https://haipeng-lin.blog.csdn.net/">haipeng-lin.blog.csdn.net</a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1springboot%E7%AE%80%E4%BB%8B"><span class="toc-text"> 1.SpringBoot简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E5%8E%9F%E6%9C%89spring%E4%BC%98%E7%BC%BA%E7%82%B9%E5%88%86%E6%9E%90"><span class="toc-text"> 1.1原有Spring优缺点分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#111spring%E4%BC%98%E7%82%B9"><span class="toc-text"> 1.1.1Spring优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#112spring%E7%BC%BA%E7%82%B9"><span class="toc-text"> 1.1.2Spring缺点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12springboot%E6%A6%82%E8%BF%B0"><span class="toc-text"> 1.2SpringBoot概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#121springboot%E8%A7%A3%E5%86%B3%E4%B8%8A%E8%BF%B0spring%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="toc-text"> 1.2.1SpringBoot解决上述Spring的缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#122springboot%E7%89%B9%E7%82%B9"><span class="toc-text"> 1.2.2SpringBoot特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#123springboot%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD"><span class="toc-text"> 1.2.3SpringBoot核心功能</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2springboot%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text"> 2.SpringBoot快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text"> 2.1代码实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#211%E5%88%9B%E5%BB%BAmaven%E5%B7%A5%E7%A8%8B"><span class="toc-text"> 2.1.1创建Maven工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#212%E6%B7%BB%E5%8A%A0springboot%E7%9A%84%E8%B5%B7%E6%AD%A5%E4%BE%9D%E8%B5%96"><span class="toc-text"> 2.1.2添加SpringBoot的起步依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#213%E7%BC%96%E5%86%99springboot%E5%BC%95%E5%AF%BC%E7%B1%BB"><span class="toc-text"> 2.1.3编写SpringBoot引导类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#214%E7%BC%96%E5%86%99controller"><span class="toc-text"> 2.1.4编写controller</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#215%E6%B5%8B%E8%AF%95"><span class="toc-text"> 2.1.5测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%E8%A7%A3%E6%9E%90"><span class="toc-text"> 2.2快速入门解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#221%E5%BC%95%E5%AF%BC%E7%B1%BB%E8%A7%A3%E6%9E%90"><span class="toc-text"> 2.2.1引导类解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#222%E5%B7%A5%E7%A8%8B%E7%83%AD%E9%83%A8%E7%BD%B2%E8%A7%A3%E6%9E%90"><span class="toc-text"> 2.2.2工程热部署解析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23%E4%BD%BF%E7%94%A8idea%E5%BF%AB%E9%80%9F%E5%88%9B%E5%BB%BAspringboot%E9%A1%B9%E7%9B%AE%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-text"> 2.3使用Idea快速创建SpringBoot项目（自动导入依赖）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3springboot%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90"><span class="toc-text"> 3.SpringBoot原理分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#31%E8%B5%B7%E6%AD%A5%E4%BE%9D%E8%B5%96%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90"><span class="toc-text"> 3.1起步依赖原理分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#311%E5%88%86%E6%9E%90spring-boot-starter-parent"><span class="toc-text"> 3.1.1分析spring-boot-starter-parent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#312%E5%88%86%E6%9E%90spring-boot-starter-web"><span class="toc-text"> 3.1.2分析spring-boot-starter-web</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#32%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90"><span class="toc-text"> 3.2自动配置原理解析</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4springboot%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text"> 4.SpringBoot的配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41springboot%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%8F%8A%E4%BD%9C%E7%94%A8"><span class="toc-text"> 4.1SpringBoot配置文件的类型及作用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#411%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E5%8F%8A%E4%BD%9C%E7%94%A8"><span class="toc-text"> 4.1.1配置文件类型及作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#412-applicationproperties"><span class="toc-text"> 4.1.2 application.properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#413-applicationyml%E6%88%96applicationyaml"><span class="toc-text"> 4.1.3 application.yml或application.yaml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#414%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%95%B0%E6%8D%AE"><span class="toc-text"> 4.1.4读取配置文件数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="toc-text"> 4.2配置文件的加载顺序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#421%E9%A1%B9%E7%9B%AE%E5%86%85%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="toc-text"> 4.2.1项目内配置文件加载顺序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E4%B8%8D%E5%90%8C%E7%9B%AE%E5%BD%95%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="toc-text"> （1）不同目录的配置文件的加载顺序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E5%90%8C%E4%B8%80%E7%9B%AE%E5%BD%95-%E4%B8%8D%E5%90%8C%E5%90%8E%E7%BC%80%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="toc-text"> （2）同一目录、不同后缀的配置文件加载顺序</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#422%E5%A4%96%E9%83%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text"> 4.2.2外部配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0"><span class="toc-text"> （1）命令行参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2spirngconfiglocation"><span class="toc-text"> （2）spirng.config.location</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#43%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-text"> 4.3多环境配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#431%E5%A4%9A%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AA%E7%8E%AF%E5%A2%83"><span class="toc-text"> 4.3.1多文件配置多个环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#432%E5%8D%95%E4%B8%AA%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AA%E7%8E%AF%E5%A2%83"><span class="toc-text"> 4.3.2单个文件配置多个环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#433%E8%A1%A5%E5%85%85%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%8C%87%E5%AE%9A"><span class="toc-text"> 4.3.3补充：命令行指定</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5springboot%E6%95%B4%E5%90%88%E5%85%B6%E4%BB%96%E6%8A%80%E6%9C%AF"><span class="toc-text"> 5.SpringBoot整合其他技术</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#51springboot%E6%95%B4%E5%90%88junit"><span class="toc-text"> 5.1SpringBoot整合Junit</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#511%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96"><span class="toc-text"> 5.1.1添加依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#512%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-text"> 5.1.2编写测试类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#513%E6%8E%A7%E5%88%B6%E5%8F%B0"><span class="toc-text"> 5.1.3控制台</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#52springboot%E6%95%B4%E5%90%88mybatis"><span class="toc-text"> 5.2SpringBoot整合Mybatis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#521%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96"><span class="toc-text"> 5.2.1添加依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#522%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A9%B1%E5%8A%A8"><span class="toc-text"> 5.2.2添加数据库驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#523%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5"><span class="toc-text"> 5.2.3添加数据库连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#524%E5%88%9B%E5%BB%BAuser%E8%A1%A8"><span class="toc-text"> 5.2.4创建user表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#525%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93bean"><span class="toc-text"> 5.2.5创建实体Bean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#526%E7%BC%96%E5%86%99mapper%E6%8E%A5%E5%8F%A3"><span class="toc-text"> 5.2.6编写Mapper接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#527%E9%85%8D%E7%BD%AEmapper%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="toc-text"> 5.2.7配置Mapper映射文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#528%E5%9C%A8applicationproperties%E6%B7%BB%E5%8A%A0%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E4%BF%A1%E6%81%AF"><span class="toc-text"> 5.2.8在application.properties添加映射文件信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#529controller%E5%B1%82"><span class="toc-text"> 5.2.9controller层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5210%E6%B5%8B%E8%AF%95"><span class="toc-text"> 5.2.10测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#53springboot%E6%95%B4%E5%90%88redis"><span class="toc-text"> 5.3SpringBoot整合Redis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#54springboot%E6%95%B4%E5%90%88mybatis-plus"><span class="toc-text"> 5.4SpringBoot整合Mybatis Plus</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#541%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-text"> 5.4.1导入依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#542yml%E9%85%8D%E7%BD%AE"><span class="toc-text"> 5.4.2yml配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#543%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E5%AE%9E%E4%BD%93"><span class="toc-text"> 5.4.3用户信息实体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#544%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-text"> 5.4.4配置类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#545%E5%90%AF%E5%8A%A8%E7%B1%BB"><span class="toc-text"> 5.4.5启动类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#546dao%E5%B1%82"><span class="toc-text"> 5.4.6Dao层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#547service%E5%B1%82"><span class="toc-text"> 5.4.7Service层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#548%E6%89%A9%E5%B1%95mybatis-plus%E7%9A%84%E6%A0%B8%E5%BF%83"><span class="toc-text"> 5.4.8扩展：Mybatis Plus的核心</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#55springboot%E6%95%B4%E5%90%88rabbitmq"><span class="toc-text"> 5.5SpringBoot整合RabbitMQ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6springboot%E5%AE%9E%E7%8E%B0%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text"> 6.SpringBoot实现拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#61%E6%8B%A6%E6%88%AA%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="toc-text"> 6.1拦截器介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#62%E6%8B%A6%E6%88%AA%E5%99%A8%E4%BD%9C%E7%94%A8"><span class="toc-text"> 6.2拦截器作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#63%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text"> 6.3自定义拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#631loginterceptor%E7%B1%BB"><span class="toc-text"> 6.3.1LogInterceptor类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#632oldlogininterceptor%E7%B1%BB"><span class="toc-text"> 6.3.2OldLoginInterceptor类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#633%E9%85%8D%E7%BD%AE%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-text"> 6.3.3配置拦截器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#64%E5%BA%94%E7%94%A8"><span class="toc-text"> 6.4应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#641%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7"><span class="toc-text"> 6.4.1性能监控</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#642%E7%99%BB%E5%BD%95%E6%A3%80%E6%B5%8B"><span class="toc-text"> 6.4.2登录检测</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD"><span class="toc-text"> 7.文件上传&#x2F;下载</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#71%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD%E6%B5%81%E7%A8%8B%E6%A6%82%E8%BF%B0"><span class="toc-text"> 7.1文件上传&#x2F;下载流程概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#711%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text"> 7.1.1文件上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#712%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-text"> 7.1.2文件下载</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#72%E5%AE%9E%E7%8E%B0%E8%BF%87%E7%A8%8B"><span class="toc-text"> 7.2实现过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#721%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96"><span class="toc-text"> 7.2.1添加依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#722%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%A4%A7%E5%B0%8F%E9%99%90%E5%88%B6"><span class="toc-text"> 7.2.2配置文件上传大小限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#723%E4%B8%8A%E4%BC%A0%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-text"> 7.2.3上传控制器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#724%E4%B8%8B%E8%BD%BD%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-text"> 7.2.4下载控制器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8springboot%E8%AE%BF%E9%97%AE%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="toc-text"> 8.SpringBoot访问静态资源</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#81%E4%BD%95%E4%B8%BA%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="toc-text"> 8.1何为静态资源？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#82%E8%AE%BE%E7%BD%AE%E8%AE%BF%E9%97%AE%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95"><span class="toc-text"> 8.2设置访问静态资源的两种方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#821application%E8%AE%BE%E7%BD%AE%E6%96%B9%E6%B3%95"><span class="toc-text"> 8.2.1application设置方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%AE%B2"><span class="toc-text"> （1）配置详讲</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E5%AE%9E%E8%B7%B5"><span class="toc-text"> （2）实践</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-text"> （3）优缺点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#822%E8%AE%BE%E7%BD%AE%E9%85%8D%E7%BD%AE%E7%B1%BB%E6%96%B9%E6%B3%95"><span class="toc-text"> 8.2.2设置配置类方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E6%96%B9%E6%B3%95%E4%BB%8B%E7%BB%8D"><span class="toc-text"> （1）方法介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E5%AE%9E%E8%B7%B5-2"><span class="toc-text"> （2）实践</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E4%BC%98%E7%BC%BA%E7%82%B9-2"><span class="toc-text"> （3）优缺点</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/2fccc80a.html" title="基于ES和Canal分别实现数据检索/同步"><img src="https://haipeng-lin.oss-cn-shenzhen.aliyuncs.com/202411031858285.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于ES和Canal分别实现数据检索/同步"/></a><div class="content"><a class="title" href="/posts/2fccc80a.html" title="基于ES和Canal分别实现数据检索/同步">基于ES和Canal分别实现数据检索/同步</a><time datetime="2024-11-03T10:56:12.000Z" title="发表于 2024-11-03 18:56:12">2024-11-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/46ceb5bd.html" title="基于Redis实现用户活跃月/日排行榜"><img src="https://haipeng-lin.oss-cn-shenzhen.aliyuncs.com/202410291146967.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于Redis实现用户活跃月/日排行榜"/></a><div class="content"><a class="title" href="/posts/46ceb5bd.html" title="基于Redis实现用户活跃月/日排行榜">基于Redis实现用户活跃月/日排行榜</a><time datetime="2024-10-29T03:44:41.000Z" title="发表于 2024-10-29 11:44:41">2024-10-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/8239deef.html" title="基于微信公众号+验证码实现微信登录"><img src="https://haipeng-lin.oss-cn-shenzhen.aliyuncs.com/202410282106730.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于微信公众号+验证码实现微信登录"/></a><div class="content"><a class="title" href="/posts/8239deef.html" title="基于微信公众号+验证码实现微信登录">基于微信公众号+验证码实现微信登录</a><time datetime="2024-10-28T13:05:25.000Z" title="发表于 2024-10-28 21:05:25">2024-10-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/172c1a2d.html" title="ElasticSearch学习笔记"><img src="https://haipeng-lin.oss-cn-shenzhen.aliyuncs.com/202410161138400.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ElasticSearch学习笔记"/></a><div class="content"><a class="title" href="/posts/172c1a2d.html" title="ElasticSearch学习笔记">ElasticSearch学习笔记</a><time datetime="2024-10-16T03:36:17.000Z" title="发表于 2024-10-16 11:36:17">2024-10-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/6982816f.html" title="RocketMQ学习笔记"><img src="https://haipeng-lin.oss-cn-shenzhen.aliyuncs.com/202410131719724.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RocketMQ学习笔记"/></a><div class="content"><a class="title" href="/posts/6982816f.html" title="RocketMQ学习笔记">RocketMQ学习笔记</a><time datetime="2024-10-13T09:17:30.000Z" title="发表于 2024-10-13 17:17:30">2024-10-13</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer-left"><div class="footer-title"><span>拾忆鱼's Blog | </span><span class="footer-copyright">&copy;2024 By 拾忆鱼</span></div><div class="wordcount"></div><span>拾忆鱼 已经写了 264.2k 字，</span><span>好像写完一本 钱钟书 的 《围城》 了啊</span></div><div id="footer-right"><div class="footer_custom_text"><div id="runtime"></div></div><div class="footer-totop"><i class="fas fa-chevron-up" onclick="rmf.scrollToTop()"></i></div><div class="footer-info"><p>使用Hexo框架 | 基于butterfly修改 | 萌ICP备20240730号</p><!--a(title='湘公网安备 2023003198号' href='http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=2023003198')= '湘公网安备 2023003198号'--><!--a(title='湘ICP备2023003198号' href='https://beian.miit.gov.cn/')= '湘ICP备2023003198号'--></div><div class="footer-service"><a title="51LA" target="_blank" rel="noopener" href="https://www.51.la"><img alt="51LA" src="https://gitee.com/linhaipengg/md_-picture/raw/master/51la.png"/></a><a title="CC BY-NC-SA 4.0" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><img alt="CC BY-NC-SA 4.0" src="https://img.june-pj.cn/img/2024/01/16/cc.webp"/></a></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.haipeng-lin.cn',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.haipeng-lin.cn',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/twikoo/1.4.18/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script data-pjax src="/gitcalendar/js/gitcalendar.js"></script><script data-pjax src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/js/swiper.min.js"></script><script src="/js/footer.js"></script><script type="text/javascript" src="/js/main.js"></script><script data-pjax type="text/javascript" src="/js/essay/essay.js"></script><script data-pjax type="text/javascript" src="/js/essay/waterfall.js"></script><link rel="stylesheet" href="/css/swiper.css"><script data-pjax src="/js/categoryBar/categoryBar.js"></script><link data-pjax defer="" rel="stylesheet" href="/css/categoryBar/heoMainColor.css"><link data-pjax defer="" rel="stylesheet" href="/css/categoryBar/categoryBar.css"><script type="text/javascript" src="/js/nav.js"></script><script src="/js/countup.js"></script><script data-pjax type="text/javascript" src="/js/memos/waterfall.min.js"></script><script data-pjax type="text/javascript" src="/js/memos/imgStatus.min.js"></script><script data-pjax type="text/javascript" src="/js/memos/lately.min.js"></script><script type="text/javascript" src="/js/memos/photo.js"></script><script type="text/javascript" src="/js/icat.js"></script><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>